@startuml TMS_Screen_Flow
title Luồng Màn Hình TMS (Bố cục dọc A4)
skinparam backgroundColor #FFFFFF
skinparam defaultFontName Inter
skinparam Shadowing false
skinparam ArrowThickness 1
skinparam activity {
  Padding 8
  FontSize 12
  BackgroundColor #F7F9FC
  BorderColor #1F3A93
}
skinparam wrapWidth 200
skinparam maxMessageSize 160

start
:Người dùng truy cập /tms;
:TmsPage → /tms/dashboard;

if (Đã đăng nhập?) then (Có)
  :Render TmsLayout\n(AppBar + Sidebar + Nội dung);
else (Không)
  :Chuyển về /auth/signin;
  stop
endif

:Xem Dashboard và chọn module từ Sidebar;

split
  group Chương trình đào tạo
    :Mở /tms/programs;
    if (Chọn bản ghi?) then (Có)
      :Xem /tms/programs/{id};
      if (Cần cấu trúc?) then (Có)
        :/tms/programs/{id}/structure;
      endif
      if (Cần chỉnh sửa?) then (Có)
        :/tms/programs/{id}/edit;
      endif
    else (Tạo mới)
      :/tms/programs/create;
    endif
  end group
split again
  group Học phần
    :Mở /tms/courses;
    if (Tạo mới?) then (Có)
      :/tms/courses/create;
    else (Syllabus)
      :/tms/courses/build-syllabus;
      :/tms/courses/{id}/syllabus;
    endif
  end group
end split

split
  group Ngành đào tạo
    :/tms/majors;
    :Chi tiết /tms/majors/{id};
    :/tms/majors/create;
  end group
split again
  group Khóa học (Cohort)
    :/tms/cohorts;
    :/tms/cohorts/create;
    :/tms/cohorts/statistics;
  end group
end split

split
  group Trung tâm phê duyệt
    :/tms/review;
    :Chọn loại tài nguyên + lọc danh sách;
    :Mở modal chi tiết;
    if (Có quyền?) then (Có)
      :Thực hiện approve / reject / request_edit / publish;
    endif
  end group
split again
  group Màn hình hỗ trợ
    :/tms/history;
    :/tms/reports;
    :/tms/documents;
    :/tms/config;
  end group
end split

:Quay lại Dashboard hoặc chọn module khác qua Sidebar/AppBar;
stop
@enduml

