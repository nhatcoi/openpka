@startuml All Workflows
!theme plain
skinparam backgroundColor #FFFFFF
skinparam rectangle {
    BackgroundColor #E8F5E8
    BorderColor #4CAF50
    FontSize 10
}
skinparam note {
    BackgroundColor #FFF3E0
    BorderColor #FF9800
    FontSize 9
}

title All Workflows in Training Management System

' =============================================
' 1. COURSE APPROVAL WORKFLOW
' =============================================
package "1. Course Approval Workflow" {
    [Giảng viên soạn thảo nháp] as CStart
    [Khoa thẩm định và gửi xem xét] as CStep1
    [Phòng đào tạo phê duyệt] as CStep2
    [Hội đồng đào tạo công bố] as CStep3
    [Khóa học được phê duyệt] as CEnd
    
    CStart --> CStep1 : "Timeout: 3 ngày"
    CStep1 --> CStep2 : "Timeout: 5 ngày"
    CStep2 --> CStep3 : "Timeout: 7 ngày"
    CStep3 --> CEnd
    
    note right of CStep1
      Role: FACULTY_HEAD
      Level: FACULTY
      Permission: tms.course.review
    end note
    
    note right of CStep2
      Role: ACADEMIC_OFFICE
      Level: DEPARTMENT
      Permission: tms.course.approve
    end note
    
    note right of CStep3
      Role: ACADEMIC_BOARD
      Level: UNIVERSITY
      Permission: tms.course.publish
    end note
  
}

' =============================================
' 2. PROGRAM APPROVAL WORKFLOW
' =============================================
package "2. Program Approval Workflow" {
    [Giảng viên soạn thảo nháp] as PStart
    [Khoa thẩm định và gửi xem xét] as PStep1
    [Phòng đào tạo phê duyệt] as PStep2
    [Hội đồng đào tạo công bố] as PStep3
    [Chương trình được phê duyệt] as PEnd
    
    PStart --> PStep1 : "Timeout: 5 ngày"
    PStep1 --> PStep2 : "Timeout: 7 ngày"
    PStep2 --> PStep3 : "Timeout: 10 ngày"
    PStep3 --> PEnd
    
    note right of PStep1
      Role: DEAN
      Level: FACULTY
      Permission: tms.program.review
    end note
    
    note right of PStep2
      Role: ACADEMIC_OFFICE
      Level: DEPARTMENT
      Permission: tms.program.approve
    end note
    
    note right of PStep3
      Role: ACADEMIC_BOARD
      Level: UNIVERSITY
      Permission: tms.program.publish
    end note
}

' =============================================
' 3. MAJOR APPROVAL WORKFLOW
' =============================================
package "3. Major Approval Workflow" {
    [Khoa đề xuất ngành mới] as MStart
    [Trưởng khoa phê duyệt] as MStep1
    [Phòng đào tạo thẩm định] as MStep2
    [Hội đồng khoa học phê duyệt] as MStep3
    [Bộ Giáo dục phê duyệt] as MStep4
    [Ngành được phê duyệt] as MEnd
    
    MStart --> MStep1 : "Timeout: 7 ngày"
    MStep1 --> MStep2 : "Timeout: 10 ngày"
    MStep2 --> MStep3 : "Timeout: 14 ngày"
    MStep3 --> MStep4 : "Timeout: 30 ngày"
    MStep4 --> MEnd
    
    note right of MStep1
      Role: DEAN
      Level: FACULTY
      Permission: tms.major.approve
    end note
    
    note right of MStep2
      Role: ACADEMIC_OFFICE
      Level: DEPARTMENT
      Permission: tms.major.review
    end note
    
    note right of MStep3
      Role: ACADEMIC_BOARD
      Level: UNIVERSITY
      Permission: tms.major.approve
    end note
    
    note right of MStep4
      Role: MOET_APPROVAL
      Level: MINISTRY
      Permission: tms.major.publish
    end note
}

' =============================================
' 4. LEAVE REQUEST WORKFLOW
' =============================================
package "4. Leave Request Workflow" {
    [Nhân viên gửi đơn nghỉ] as LStart
    [Trưởng phòng trực tiếp] as LStep1
    [Phòng nhân sự xác nhận] as LStep2
    [Giám đốc phê duyệt] as LStep3
    [Đơn nghỉ được phê duyệt] as LEnd
    [Đơn nghỉ ngắn hạn] as LShort
    
    LStart --> LStep1 : "Timeout: 2 ngày"
    LStep1 --> LStep2 : "Timeout: 1 ngày"
    LStep2 --> LStep3 : "Nếu nghỉ > 5 ngày\nTimeout: 3 ngày"
    LStep2 --> LShort : "Nếu nghỉ ≤ 5 ngày"
    LStep3 --> LEnd
    
    note right of LStep1
      Role: SUPERVISOR
      Level: DEPARTMENT
      Permission: hr.leave.approve
    end note
    
    note right of LStep2
      Role: HR_MANAGER
      Level: DEPARTMENT
      Permission: hr.leave.confirm
    end note
    
    note right of LStep3
      Role: DIRECTOR
      Level: UNIVERSITY
      Permission: hr.leave.approve
    end note
}

' =============================================
' 5. ORGANIZATION STRUCTURE WORKFLOW
' =============================================
package "5. Organization Structure Workflow" {
    [Yêu cầu thay đổi cấu trúc] as OStart
    [Phòng tổ chức xem xét] as OStep1
    [Ban giám hiệu phê duyệt] as OStep2
    [Hội đồng trường thông qua] as OStep3
    [Cấu trúc được thay đổi] as OEnd
    
    OStart --> OStep1 : "Timeout: 5 ngày"
    OStep1 --> OStep2 : "Timeout: 7 ngày"
    OStep2 --> OStep3 : "Timeout: 10 ngày"
    OStep3 --> OEnd
    
    note right of OStep1
      Role: ORG_MANAGER
      Level: DEPARTMENT
      Permission: org.structure.review
    end note
    
    note right of OStep2
      Role: BOARD_DIRECTOR
      Level: UNIVERSITY
      Permission: org.structure.approve
    end note
    
    note right of OStep3
      Role: UNIVERSITY_COUNCIL
      Level: UNIVERSITY
      Permission: org.structure.publish
    end note
}

' =============================================
' 6. EMPLOYEE HIRING WORKFLOW
' =============================================
package "6. Employee Hiring Workflow" {
    [Phòng ban đề xuất tuyển dụng] as HStart
    [Phòng nhân sự sàng lọc] as HStep1
    [Ban giám đốc phê duyệt] as HStep2
    [Phỏng vấn và đánh giá] as HStep3
    [Giám đốc ký quyết định] as HStep4
    [Nhân viên được tuyển dụng] as HEnd
    
    HStart --> HStep1 : "Timeout: 3 ngày"
    HStep1 --> HStep2 : "Timeout: 5 ngày"
    HStep2 --> HStep3 : "Timeout: 14 ngày"
    HStep3 --> HStep4 : "Timeout: 7 ngày"
    HStep4 --> HEnd
    
    note right of HStep1
      Role: HR_MANAGER
      Level: DEPARTMENT
      Permission: hr.employee.review
    end note
    
    note right of HStep2
      Role: BOARD_DIRECTOR
      Level: UNIVERSITY
      Permission: hr.employee.approve
    end note
    
    note right of HStep3
      Role: INTERVIEW_PANEL
      Level: DEPARTMENT
      Permission: hr.employee.interview
    end note
    
    note right of HStep4
      Role: DIRECTOR
      Level: UNIVERSITY
      Permission: hr.employee.hire
    end note
}

' =============================================
' 7. PERFORMANCE REVIEW WORKFLOW
' =============================================
package "7. Performance Review Workflow" {
    [Nhân viên tự đánh giá] as RStart
    [Trưởng phòng đánh giá] as RStep1
    [Phòng nhân sự xem xét] as RStep2
    [Ban giám đốc phê duyệt] as RStep3
    [Kết quả đánh giá cuối cùng] as REnd
    
    RStart --> RStep1 : "Timeout: 7 ngày"
    RStep1 --> RStep2 : "Timeout: 5 ngày"
    RStep2 --> RStep3 : "Timeout: 7 ngày"
    RStep3 --> REnd
    
    note right of RStep1
      Role: SUPERVISOR
      Level: DEPARTMENT
      Permission: hr.performance.review
    end note
    
    note right of RStep2
      Role: HR_MANAGER
      Level: DEPARTMENT
      Permission: hr.performance.confirm
    end note
    
    note right of RStep3
      Role: BOARD_DIRECTOR
      Level: UNIVERSITY
      Permission: hr.performance.approve
    end note
}

' =============================================
' 8. TRAINING REQUEST WORKFLOW
' =============================================
package "8. Training Request Workflow" {
    [Nhân viên đăng ký đào tạo] as TStart
    [Trưởng phòng phê duyệt] as TStep1
    [Phòng nhân sự xác nhận] as TStep2
    [Giám đốc phê duyệt ngân sách] as TStep3
    [Đào tạo được phê duyệt] as TEnd
    
    TStart --> TStep1 : "Timeout: 3 ngày"
    TStep1 --> TStep2 : "Timeout: 2 ngày"
    TStep2 --> TStep3 : "Timeout: 5 ngày"
    TStep3 --> TEnd
    
    note right of TStep1
      Role: SUPERVISOR
      Level: DEPARTMENT
      Permission: hr.training.approve
    end note
    
    note right of TStep2
      Role: HR_MANAGER
      Level: DEPARTMENT
      Permission: hr.training.confirm
    end note
    
    note right of TStep3
      Role: DIRECTOR
      Level: UNIVERSITY
      Permission: hr.training.budget
    end note
}

' =============================================
' 9. EVALUATION PERIOD WORKFLOW
' =============================================
package "9. Evaluation Period Workflow" {
    [Tạo kỳ đánh giá mới] as EStart
    [Phòng nhân sự thiết lập] as EStep1
    [Ban giám đốc phê duyệt] as EStep2
    [Thông báo kỳ đánh giá] as EStep3
    [Kỳ đánh giá được kích hoạt] as EEnd
    
    EStart --> EStep1 : "Timeout: 3 ngày"
    EStep1 --> EStep2 : "Timeout: 5 ngày"
    EStep2 --> EStep3 : "Timeout: 2 ngày"
    EStep3 --> EEnd
    
    note right of EStep1
      Role: HR_MANAGER
      Level: DEPARTMENT
      Permission: hr.evaluation.setup
    end note
    
    note right of EStep2
      Role: BOARD_DIRECTOR
      Level: UNIVERSITY
      Permission: hr.evaluation.approve
    end note
    
    note right of EStep3
      Role: HR_MANAGER
      Level: DEPARTMENT
      Permission: hr.evaluation.notify
    end note
}

' =============================================
' 10. FINANCIAL APPROVAL WORKFLOW
' =============================================
package "10. Financial Approval Workflow" {
    [Đề xuất chi phí] as FStart
    [Trưởng phòng phê duyệt] as FStep1
    [Phòng tài chính xem xét] as FStep2
    [Giám đốc phê duyệt ngân sách] as FStep3
    [Chi phí được phê duyệt] as FEnd
    
    FStart --> FStep1 : "Timeout: 2 ngày"
    FStep1 --> FStep2 : "Timeout: 3 ngày"
    FStep2 --> FStep3 : "Timeout: 5 ngày"
    FStep3 --> FEnd
    
    note right of FStep1
      Role: DEPARTMENT_HEAD
      Level: DEPARTMENT
      Permission: finance.request.approve
    end note
    
    note right of FStep2
      Role: FINANCE_MANAGER
      Level: DEPARTMENT
      Permission: finance.request.review
    end note
    
    note right of FStep3
      Role: DIRECTOR
      Level: UNIVERSITY
      Permission: finance.request.budget
    end note
}

' =============================================
' 11. CURRICULUM UPDATE WORKFLOW
' =============================================
package "11. Curriculum Update Workflow" {
    [Khoa đề xuất cập nhật CTĐT] as CUStart
    [Trưởng khoa phê duyệt] as CUStep1
    [Phòng đào tạo thẩm định] as CUStep2
    [Hội đồng khoa học phê duyệt] as CUStep3
    [Ban giám hiệu thông qua] as CUStep4
    [CTĐT được cập nhật] as CUEnd
    
    CUStart --> CUStep1 : "Timeout: 5 ngày"
    CUStep1 --> CUStep2 : "Timeout: 7 ngày"
    CUStep2 --> CUStep3 : "Timeout: 10 ngày"
    CUStep3 --> CUStep4 : "Timeout: 7 ngày"
    CUStep4 --> CUEnd
    
    note right of CUStep1
      Role: DEAN
      Level: FACULTY
      Permission: tms.curriculum.approve
    end note
    
    note right of CUStep2
      Role: ACADEMIC_OFFICE
      Level: DEPARTMENT
      Permission: tms.curriculum.review
    end note
    
    note right of CUStep3
      Role: ACADEMIC_BOARD
      Level: UNIVERSITY
      Permission: tms.curriculum.approve
    end note
    
    note right of CUStep4
      Role: BOARD_DIRECTOR
      Level: UNIVERSITY
      Permission: tms.curriculum.publish
    end note
}

' =============================================
' 12. STUDENT ENROLLMENT WORKFLOW
' =============================================
package "12. Student Enrollment Workflow" {
    [Sinh viên đăng ký nhập học] as SEStart
    [Phòng đào tạo xét duyệt] as SEStep1
    [Phòng tài chính xác nhận] as SEStep2
    [Phòng hành chính hoàn thiện] as SEStep3
    [Sinh viên được nhập học] as SEEnd
    
    SEStart --> SEStep1 : "Timeout: 3 ngày"
    SEStep1 --> SEStep2 : "Timeout: 2 ngày"
    SEStep2 --> SEStep3 : "Timeout: 3 ngày"
    SEStep3 --> SEEnd
    
    note right of SEStep1
      Role: ACADEMIC_OFFICE
      Level: DEPARTMENT
      Permission: student.enrollment.review
    end note
    
    note right of SEStep2
      Role: FINANCE_OFFICE
      Level: DEPARTMENT
      Permission: student.enrollment.payment
    end note
    
    note right of SEStep3
      Role: ADMIN_OFFICE
      Level: DEPARTMENT
      Permission: student.enrollment.complete
    end note
}

@enduml
